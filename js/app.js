(()=>{var e={170:()=>{const e=document.querySelector(".welcome-content"),s=document.querySelector(".field-for-nickname"),t=document.querySelector(".existing-user"),n=document.querySelector(".enter-btn"),a=document.querySelector(".authorized-content"),r=document.querySelector(".guest-list"),o=document.querySelector(".messages-list"),i=document.querySelector(".field-for-message"),c=document.querySelector(".sending-message-btn"),l=new WebSocket("wss://valerie-sidman-ws-server.herokuapp.com");function d(e,s,t,n){const a={method:e,nickname:s,message:t,date:n};l.send(JSON.stringify(a))}let u;n.addEventListener("click",(e=>{e.preventDefault(),d("login",s.value),u=s.value})),l.onmessage=s=>{const n=JSON.parse(s.data);if(u)if("login"===n.method){if("Already exists"===n.message)t.classList.remove("inactive");else if("Login successfully"===n.message){e.classList.add("inactive"),a.classList.remove("inactive");const s=`\n          <li class="guest">\n            <div class="guest-avatar"></div>\n            <div class="guest-name">${n.nickname===u?"You":n.nickname}</div>\n          </li>\n        `;r.insertAdjacentHTML("beforeend",s),n.nickname===u&&d("users",u)}}else if("send"===n.method){const e=new Date(n.date),s=e.getFullYear(),t=`0${e.getMonth()+1}`,a=`0${e.getDate()}`,r=`0${e.getHours()}`,i=`0${e.getMinutes()}`,c=`0${e.getSeconds()}`,l=`${a.substr(-2)}.${t.substr(-2)}.${s} ${r.substr(-2)}:${i.substr(-2)}:${c.substr(-2)}`,d=n.nickname===u?"You":n.nickname,m=`\n        <li class="message${n.nickname===u?" client-message":""}">\n          <div class="message-header">\n              <div class="message-sender">${d}</div>\n              <div class="message-time">${l}</div>\n          </div>\n          <div class="message-body">${n.message}</div>\n        </li>\n      `;o.insertAdjacentHTML("beforeend",m)}else if("users"===n.method)n.nickname===u&&n.message.forEach((e=>{if(e!==u){const s=`\n            <li class="guest">\n              <div class="guest-avatar"></div>\n              <div class="guest-name">${e}</div>\n            </li>\n          `;r.insertAdjacentHTML("beforeend",s)}}));else if("logout"===n.method){const e=r.querySelectorAll(".guest");Array.from(e).forEach((e=>{e.querySelector(".guest-name").textContent===n.nickname&&e.remove()}))}},c.addEventListener("click",(e=>{e.preventDefault(),d("send",u,i.value,Date.now()),i.value=""})),i.addEventListener("keyup",(e=>{"Enter"===e.key&&(d("send",u,i.value,Date.now()),i.value="")})),window.onunload=()=>{d("logout",u)}}},s={};function t(n){if(s[n])return s[n].exports;var a=s[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";t(170)})()})();